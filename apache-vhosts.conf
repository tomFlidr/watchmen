<VirtualHost *:443>
	ServerName		www.example.com

	# Disable directory listing:
	Options -Indexes
	<IfModule mod_rewrite.c>
		RewriteEngine On
		# node app
		# websockets
		RewriteCond %{HTTP:Upgrade} =websocket [NC]
		RewriteRule /watchmen(.*) ws://127.0.0.1:3456$1 [P,L]
		# https
		RewriteCond %{REQUEST_URI} ^/watchmen(.*)$
		RewriteRule /watchmen(.*) http://127.0.0.1:3456$1 [P,L]
	</IfModule>
	<Location "/watchmen/">
		AuthType Digest
		AuthName "Watchmen Monitoring"
		AuthDigestDomain /watchmen/
		AuthUserFile /var/www/html/watchmen/.htdigest
		Require user watchmen
		Satisfy All
	</Location>

</VirtualHost>